# Computed 和 Watch 的区别

## computed

**计算属性**  

- computed 是用于创建计算属性的方式

-  computed依赖于Vue的响应式系统 来进行数据追踪
-  当依赖的数据发生变化时, 计算属性会自动重新计算
  - 只在必要时才重新计算

****

**缓存**

- 计算属性是具有缓存机制的
- 只有在它**依赖的数据发生变化时**
  - 计算属性才会**重新计算**
- 这代表了多次访问同一个计算属性会返回相同结果时
  - 而不会重复计算

****

**无副作用**

- 计算属性应当是无副作用的
- 它们只是基于数据的计算 , 并不会修改数据本身

****

**使用于template中**

- 计算属性通常用于模板中 ,以便在模板中显示计算后数据

****

**同步**

- 只对同步代码中的依赖响应



## Watch

**侦听数据**

- watch用于侦听数据的变化
- 可以侦听一个或多个数据的变化
  - 以执行自定义的响应式操作

****

**副作用操作**

- watch中的回调函数 可以执行 副作用操作
- 如 发送网络请求 ，手动操作DOM ，执行其他需要的逻辑

****

**不缓存**

- watch 中的回调函数 会在 依赖数据的发生变化时 立即被触发
  - 不会想computed 那样具有缓存机制

****

**监听数据的变化**

- watch通常用于监听数据的变化
- 而不是用于template中显示数据

****

**支持异步**

- 在检查到数据变化后， 可进行同步或异步操作







# computed常用于那些业务场景, watch常用于那些场景

在 Vue.js 中，`computed` 和 `watch` 都用于处理数据的反应性，但它们的适用场景有所不同。下面是常见的业务场景：

### `computed` 的业务场景

`computed` 属性用于基于已有的数据来计算和返回新的值，并且只有当依赖的数据发生变化时，`computed` 属性才会重新计算。这使得它非常适合以下场景：

1. **数据派生**：当需要基于某些状态派生出新的值时，比如**计算总价、过滤列表、格式化日期**等。`computed` 属性会根据依赖的数据自动更新计算结果。

   **示例**：

   - 基于购物车中的商品数量和价格，计算总金额。
   - 根据用户输入的文本，实时生成处理后的结果，如去掉空格或转换为大写。

2. **性能优化**：`computed` 属性具有缓存功能，只有当依赖的数据发生变化时才会重新计算，这对于需要进行复杂计算或处理的数据非常有用，可以避免不必要的重复计算。

   **示例**：

   - **计算大量数据中的某个统计信息，比如平均值或中位数，只在数据变化时更新结果**。

3. **模板中的复杂表达式**：**避免在模板中写复杂的逻辑，将逻辑提取到 `computed` 属性中，使模板更加清晰易读**。

   **示例**：

   - **显示用户的完整名称，而不是在模板中直接拼接**。

### `watch` 的业务场景

`watch` 监听器用于监视某些数据的变化，并在数据变化时执行特定的副作用操作。这在以下场景中尤为适用：

1. **异步操作或副作用**：当数据变化时，需要执行异步操作（如 API 请求）或副作用操作（如更新 DOM、手动更新某些数据）。

   **示例**：

   - **用户在输入框中输入查询关键字时，触发 API 请求获取搜索结果**。
   - **监听某个数据变化，手动更新某些依赖于外部插件的 UI 组件**。

2. **数据变化时触发复杂逻辑**：当数据变化时，需要执行复杂的逻辑或一系列操作，而不仅仅是简单的计算或派生数据。

   **示例**：

   - **监听用户选择的日期范围，更新多个相关的视图或数据集**。
   - **监听某个数值，满足特定条件时弹出警告或执行特定的业务逻辑。**

3. **监控多个数据变化**：在某些情况下，需要监视多个数据的变化，并在任意一个变化时执行相应操作。

   **示例**：

   - **同时监听多个表单字段，检测它们的有效性，并实时更新提交按钮的可用状态。**
   - **监听窗口大小变化，动态调整页面布局或重新加载数据。**

### 总结

- **`computed`** 适用于需要基于现有数据派生出新的数据，并且希望该数据具有缓存功能。
- **`watch`** 适用于需要在数据变化时执行异步操作、触发副作用或处理复杂逻辑。