组合模式（Composite Pattern）是一种结构型设计模式，它允许你将对象组合成树形结构来表示“部分-整体”的层次结构。组合模式让客户端对单个对象和组合对象的使用具有一致性。

### 核心思想

组合模式的核心是：

- **统一处理**：将单个对象（叶子节点）和组合对象（容器）都看作统一的“组件”。
- **递归组合**：通过树形结构将组件组织起来，容器可以包含叶子节点或其他容器。
- **透明性**：客户端不需要区分处理的是叶子节点还是容器，直接调用统一接口。

------

### 结构

组合模式主要包括以下角色：

1. **Component（抽象组件）**：
   - 定义叶子节点和容器的公共接口，如操作方法（`operation()`）和管理方法（`add()`、`remove()`、`getChild()`）。
   - 如：`Graphic`。
2. **Leaf（叶子节点）**：
   - 实现具体的功能，不包含子节点。
   - 如：`Circle`、`Rectangle`。
3. **Composite（容器）**：
   - 容器对象，维护子节点（叶子或其他容器）的集合，实现组件接口中的管理方法。
   - 如：`Group`。
4. **Client（客户端）**：
   - 通过组件接口操作对象，无需关心是叶子还是容器。

------

### 优点

1. **透明性**：客户端可以统一处理叶子和容器对象。
2. **可扩展性**：新增叶子或容器节点不会影响现有代码。
3. **简化客户端代码**：客户端无需判断对象类型，可以直接操作。

组合模式（Composite Pattern）是一种结构型设计模式，它允许你将对象组合成树形结构来表示“部分-整体”的层次结构。组合模式让客户端对单个对象和组合对象的使用具有一致性。

### 核心思想

组合模式的核心是：

- **统一处理**：将单个对象（叶子节点）和组合对象（容器）都看作统一的“组件”。
- **递归组合**：通过树形结构将组件组织起来，容器可以包含叶子节点或其他容器。
- **透明性**：客户端不需要区分处理的是叶子节点还是容器，直接调用统一接口。

------

### 结构

组合模式主要包括以下角色：

1. **Component（抽象组件）**：
   - 定义叶子节点和容器的公共接口，如操作方法（`operation()`）和管理方法（`add()`、`remove()`、`getChild()`）。
   - 如：`Graphic`。
2. **Leaf（叶子节点）**：
   - 实现具体的功能，不包含子节点。
   - 如：`Circle`、`Rectangle`。
3. **Composite（容器）**：
   - 容器对象，维护子节点（叶子或其他容器）的集合，实现组件接口中的管理方法。
   - 如：`Group`。
4. **Client（客户端）**：
   - 通过组件接口操作对象，无需关心是叶子还是容器。

------

### 优点

1. **透明性**：客户端可以统一处理叶子和容器对象。
2. **可扩展性**：新增叶子或容器节点不会影响现有代码。
3. **简化客户端代码**：客户端无需判断对象类型，可以直接操作。

------

### 缺点

1. **复杂性增加**：树形结构中的对象可能非常复杂。
2. **不适合过于简单的对象关系**：如果对象关系简单，使用组合模式可能过于复杂。

```js
// 抽象组件
interface Component {
    void operation(); // 统一操作方法
}

// 叶子节点
class Leaf implements Component {
    private String name;

    public Leaf(String name) {
        this.name = name;
    }

    @Override
    public void operation() {
        System.out.println("Leaf " + name + " is operated");
    }
}

// 容器
class Composite implements Component {
    private List<Component> children = new ArrayList<>();

    @Override
    public void operation() {
        System.out.println("Composite is operated");
        for (Component child : children) {
            child.operation();
        }
    }

    public void add(Component component) {
        children.add(component);
    }

    public void remove(Component component) {
        children.remove(component);
    }
}

// 客户端
public class Client {
    public static void main(String[] args) {
        // 创建叶子
        Leaf leaf1 = new Leaf("A");
        Leaf leaf2 = new Leaf("B");

        // 创建容器
        Composite composite = new Composite();
        composite.add(leaf1);
        composite.add(leaf2);

        // 操作容器
        composite.operation();
    }
}
```

