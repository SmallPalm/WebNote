# 1.$refs使用

- 在某些情况下, 我们在组件中想要**直接获取到元素对象或子组件实例**

  - 在Vue开发中我们是不推荐进行DOM 操作的

  - 这个时候 , 可以

    - 给元素或者组件**绑定一个ref的attribute属性**

      - ```js
        ref="attribute"
        ```

- 元素对象或者组件实例注册ref属性后

  - 在全局会有一个Object对象

    - 这个对象**持有**注册过 ref attribute所有的DOM元素和组件实例

  - 通过这个对象可以获取到元素对象或组件实例

    - ```js
      //访问元素
      this.$refs.attribute
      //访问组件中根元素
      this.$refs.组件.$el
      //访问组件中函数
      this.$refs.组件.函数
      ```

# 2.$parent和\$root

- 通过$Parent访问父元素
- 通过$root访问根组件



# 3.动态组件的实现

- 动态组件是使用Component组件
  - 通过一个特殊的属性 **is** 来实现的
- 这个 is 属性中
  - 加入数组形式的组件字符串
  - 切换
  - 即可动态渲染组件

##  动态组件的传值

- 动态组件代表的的组件就行父传子传值
  - 只是我们需要将属性和监听事件放到component上来使用
  - 在子组件进行接收就可以

# 认识keep-alive

- 在做动态组件时
  - 每一次切换组件时
    - 其他组件都会被默认销毁的
      - 组件中存在的状态有会被销毁
    - about组件会被销毁掉，再次回来时会重新创建组件
    - 这样是极其消耗性能的
- Keep-alive属性
  - 是将切换的组件进行缓存
  - 组件并不会销毁
    - 优化性能

## keep-Alive属性

- include - string | RegExp | Array
  - 只有名称匹配的组件会被
- exclude - string | RegExp | Array
  - 任何名称匹配的组件都不会被缓存
- max - number | string
  - 最多可以缓存多少组件实例
    - 一旦达到这个数字
      - 那么缓存组件中最近没有被访问的实例会被销毁
- include 和 exclude prop 允许组件有条件地缓存
  - 匹配首先**检查组件自身的 name 选项**

# 缓存组件的生命周期

- 对于缓存的组件来说
  - 再次进入时
  - 我们是**不会执行created或者mounted等生命周期函数**的
- 但是有时候我们确实希望监听到何时重新进入到了组件
  - 何时离开了组件
- 这个时候我们可以使用activated 和 deactivated 这两个生命周期钩子函数来监听
  - activated : 进入活跃状态
    - 等于创建组件created
  - deactivated :离开活跃状态
    - 等于销毁组件unmounted
- ![image-20231215172111991](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231215172111991.png)



# Webpack的代码分包

◼ 默认的打包过程

- 默认情况下
- 在构建整个组件树的过程中
  - 因为组件和组件之间是通过模块化直接依赖的
  - 那么webpack在打包时就会将组件模块打包到一起
    - 比如一个app.js文件中
    - 这个时候随着项目的不断庞大
    - app.js文件的内容过大
    - 会造成**首屏的渲染速度变慢**；

◼ 打包时，代码的分包

- 所以，对于一些不需要立即使用的组件
  - 我们可以单独对它们进行拆分
  - 拆分成一些小的代码块chunk.js；
- 这些chunk.js会在需要时从服务器加载下来
  - 并且运行代码
  - 显示对应的内容；

◼ **那么webpack中如何可以对代码进行分包呢？**

​	![image-20231215172438557](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231215172438557.png)



# Vue中实现异步组件

- 如果我们的项目过大了
- 对于**某些组件**我们希望**通过异步的方式来进行加载**
- 目的是可以对其进行分包处理
- 那么Vue中给我们提供了一个函数
  - defineAsyncComponent
- **defineAsyncComponent接受两种类型的参数**
  -  类型一
    - 工厂函数，该工厂函数需要返回一个Promise对象
    - ![image-20231215172716798](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231215172716798.png)
  - 类型二
    - 接受一个对象类型，对异步函数进行配置
    - ![image-20231215172736226](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231215172736226.png)



# 组件的v-model

- 前面我们在input中可以使用v-model来完成双向绑定
  - 这个时候往往会非常方便
  - 因为v-model默认帮助我们完成了两件事；
  - v-bind:value的数据绑定和@input的事件监听
- 如果我们现在**封装了一个组件**
  - 其他地方在使用这个组件时
  - 是否也可以**使用v-model来同时完成这两个功能**呢
  - 也是可以的，vue也支持在组件上使用v-model；
- **当我们在组件上使用的时候，等价于如下的操作：**
  - 我们会发现和input元素不同的只是
    - 属性的名称和事件触发的名称而已；

## 组件v-model的实现

- 将其 value attribute 绑定到一个名叫 modelValue 的 prop 上
- 在其 input 事件被触发时
  - 将新的值通过自定义的update:modelValue 事件抛出

# 绑定多个属性

- 我们现在通过v-model是直接绑定了一个属性，如果我们**希望绑定多个属性**
- 也就是我们希望在一个组件上使用多个v-model是否可以实现呢？
- 我们知道
- 默认情况下的v-model其实是
  - 绑定了 modelValue 属性和 @update:modelValue的事件
- 如果我们希望绑定更多
- 可以给v-model传入一个参数
- 那么这个参数的名称就是我们绑定属性的名称
- **v-model:title相当于做了两件事：**
  - 绑定了title属性；
  - 监听了 @update:title的事件；

# 认识Mixin

- 目前我们是使用组件化的方式在开发整个Vue的应用程序
  - 但是组件和组件之间有时候会存在相同的代码逻辑
  - 我们希望对相同的代码逻辑进行抽取
- 在Vue2和Vue3中都支持的一种方式就是**使用Mixin来完成**
  - Mixin提供了一种非常灵活的方式
    - 来分发Vue组件中的可复用功能
  - 一个Mixin对象可以包含任何组件选项
  - 当组件使用Mixin对象时
    - 所有Mixin对象的选项将被 混合 进入该组件本身的选项中

![image-20231215173553392](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231215173553392.png)



# Mixin的合并规则

**如果Mixin对象中的选项和组件对象中的选项发生了冲突，那么Vue会如何操作呢？**

- 这里分成不同的情况来进行处理；

-  **情况一**
- 如果是data函数的返回值对象
  - 返回值对象默认情况下会进行合并；
  - 如果data返回值对象的属性发生了冲突，那么会保留组件自身的数据；
- **情况二**
- 如何生命周期钩子函数
  - 生命周期的钩子函数会被合并到数组中，都会被调用；
- **情况三**
- 值为对象的选项
  - 例如 methods、components 和 directives
    - 将被合并为同一个对象。
  - 比如都有methods选项
    - 并且都定义了方法，那么它们都会生效；
  - 但是如果对象的key相同
    - 那么会取组件对象的键值对；



# 全局混入Mixin

- 如果组件中的某些选项
- 是所有的组件都需要拥有的
- 那么这个时候我们可以使用全局的mixin：
  - 全局的Mixin可以使用 应用app的方法 mixin 来完成注册；
  - 一旦注册，那么全局混入的选项将会影响每一个组件

![image-20231215173802923](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231215173802923.png)