# 复杂data的处理方式

- 模板中可以直接通过插值语法显示一些data中的数据
- 某些情况, 可能需要对数据进行一些转化后再显示 
  - 或者需要将多个数据结合起来进行显示
- 需要对多个data数据进行运算
  - 三元运算符来决定结果
  - 数据进行某种转化后显示
- 虽然在模板中使用表达式，可以非常方便的实现
  - 但是设计它们**的初衷是用于简单的运算**

这是就需要使用使用计算属性computed

# 计算属性computed

计算属性

- 对于**任何包含响应式数据的复杂逻辑**
  - 你都应该使用**计算属性**
- 计算属性将被混入到组件实例中
  - 所有 getter 和 setter 的 this 上下文自动地绑定为组件实例
- 计算属性看起来像是一个函数
  - 但是我们在Mustache语法中使用的时候不需要加()
- 计算属性是有缓存的 , 不需要无限执行
- 计算属性默认对应的是写入的函数
  - 但是函数是语法糖形式
    - 它的**本质是对象的set方法和get方法**
    - 这就是为什么可以在Mustache语法中不用加()
- 计算属性会依赖对应的响应式数据
  - 当数据发生改变时
    - 计算属性会重新计算
    - 发生改变


## 计算属性的缓存

- **计算属性会基于它们的依赖关系进行缓存**
  - 它们 : 所代表的数据
- 在数据不发生变化时，计算属性是不需要重新计算的
  - 依赖的数据不变 ,  计算属性所缓存的值不需要更改
- 如果**依赖的数据发生变化**
  - **在使用时**
  - **计算属性依然会重新进行计算**

## 计算属性的setter和getter

- 计算属性在大多数情况下
  - 只需要一个getter方法即可
  - 所以我们会将计算属性直接写成一个函数\
- ![image-20231206172754345](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231206172754345.png)



# 侦听器watch

- 开发中我们在data返回的对象中**定义了数据**
  - 这个数据通过插值语法等方式绑定到template中
- 当数据变化时
  - template会自动进行更新来显示最新的数据
- 在某些情况下
  - 我们希望在**代码逻辑中监听某个数据的变化**
    - 这个时候就需要用**侦听器watch**来完成了
- watch只是在侦听info的引用变化
  - 引用: 内存中引用的对象
  - 对于内部属性的变化是不会做出响应的
- 这时使用一个**选项deep**进行更深层的侦听
  - 选项deep : 类型boolean
  - 可以侦听到对象中内容发生的改变
- immediate选项 : boolean类型
  - 希望一开始的就会立即执行一次
  - 无论后面数据是否有变化，侦听的函数都会有限执行一次

## 使用 $watch 的API

我们可以在created的生命周期中，使用 this.$watch 来侦听

- 第一个参数是要侦听的源；

- 第二个参数是侦听的回调函数callback；
- 第三个参数是额外的其他选项
  - 比如deep、immediate
- ![image-20231206191442777](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20231206191442777.png)